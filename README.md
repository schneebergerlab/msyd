# pansyri

## Usage

Currently, only the pansynteny identification part of `pansyri` is working.
To run the procedure, an alignment (as SAM, BAM or PAF) of the queries to a reference is necessary as well as the `syri.out` file generated by running `SyRI` on the query alignment.

In order to install `pansyri`,
`$ python3 ./setup.py install [--user]`
needs to be run in the main directory.

The files to impute are specified in a tab-separated file with the first column containing the path to the alignment file and the second column the path to the `syri.out` file.
Anything after a `#` is treated as a comment.
See below for an example for identifying core-syntenic regions in the Ampril dataset.
`pansyri` is then called with

```$ pansyri <path to .tsv input file> [No of threads to spawn, default 1]

### Example

This example shows how to run `pansyri` on the Ampril dataset using Col as a reference.

For this example, the working directory contains all of the required alignment and `syri` files, as well as this tab-separated table in a file called `all.tsv`:
\#alns	| syri
--- 	| 	---
`col_an1.bam`	|	`col_an1syri.out`
`col_c24.bam` 	|	`col_c24syri.out`
`col_eri.bam` 	|	`col_erisyri.out`
`col_cvi.bam` 	|	`col_cvisyri.out`
`col_kyo.bam` 	|	`col_kyosyri.out`
`col_ler.bam` 	|	`col_lersyri.out`
`col_sha.bam` 	| 	`col_shasyri.out`

Running the following command will start identifying core synteny in a single-threaded way with pansyri:

`$ pansyri all.tsv [# of cores to use]`

## Plotsr order determination heuristic

`Pansyri` also contains an experimental script that tries to arrange input genomes to `plotsr` in an aesthetically pleasing way.
The script is called by calling `pansyri` with `order` as the first argument, followed by the names of the individual genomes.
Currently, the software assumes that the `SyRI` output file produced by comparing any two of the supplied genomes is stored in the working directory under the name `[id1]_[id2]syri.out`, as is the case in the ../data/ampril folder.
For more details, see `pansyri/ordering.py`, in particular the `order_greedy` docstring.

`pansyri order an1 c24 col cvi eri kyo ler sha`
